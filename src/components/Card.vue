<template>
  <div class="cardd">
        
    <div class="card-image">
      <svg
        id="Слой_1"
        version="1.1"
        viewBox="0 0 128 128"
        xml:space="preserve"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <g>
          <g>
            <path
              d="M109,105.2H19c-8.3,0-15-6.7-15-15V37.8c0-8.3,6.7-15,15-15h90c8.3,0,15,6.7,15,15v52.5    C124,98.5,117.3,105.2,109,105.2z"
              fill="#FFFFFF"
            />
          </g>
          <g>
            <rect fill="#FFFFFF" height="13.5" width="120" x="4" y="51.2" />
          </g>
          <g>
            <polyline fill="#938993" points="124,51.2 124,37.8 4,37.8 4,51.2 124,51.2   " />
          </g>
          <g>
            <path
              d="M109,106.5H19c-9,0-16.2-7.3-16.2-16.2V37.8c0-9,7.3-16.2,16.2-16.2h90c9,0,16.2,7.3,16.2,16.2v52.5    C125.2,99.2,118,106.5,109,106.5z M19,24c-7.6,0-13.8,6.2-13.8,13.8v52.5c0,7.6,6.2,13.8,13.8,13.8h90c7.6,0,13.8-6.2,13.8-13.8    V37.8c0-7.6-6.2-13.8-13.8-13.8H19z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M124,66H4c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2h120c0.7,0,1.2,0.6,1.2,1.2S124.7,66,124,66z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M67,59.2H11.5c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2H67c0.7,0,1.2,0.6,1.2,1.2S67.7,59.2,67,59.2z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M98.5,59.2h-15c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2h15c0.7,0,1.2,0.6,1.2,1.2S99.2,59.2,98.5,59.2z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M58,78H22c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2h36c0.7,0,1.2,0.6,1.2,1.2S58.7,78,58,78z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M58,85.5H22c-0.7,0-1.2-0.6-1.2-1.2S21.3,83,22,83h36c0.7,0,1.2,0.6,1.2,1.2S58.7,85.5,58,85.5z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M58,93H22c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2h36c0.7,0,1.2,0.6,1.2,1.2S58.7,93,58,93z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M124,52.5H4c-0.7,0-1.2-0.6-1.2-1.2S3.3,50,4,50h120c0.7,0,1.2,0.6,1.2,1.2S124.7,52.5,124,52.5z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M124,52.5H4c-0.7,0-1.2-0.6-1.2-1.2S3.3,50,4,50h120c0.7,0,1.2,0.6,1.2,1.2S124.7,52.5,124,52.5z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="M124,39H4c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2h120c0.7,0,1.2,0.6,1.2,1.2S124.7,39,124,39z"
              fill="#62355C"
            />
          </g>
          <g>
            <path
              d="    M124,51.2"
              fill="none"
              stroke="#373636"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-miterlimit="10"
              stroke-width="2.5"
            />
          </g>
          <g>
            <circle cx="104.5" cy="84.2" fill="#FEE444" r="11.2" />
          </g>
          <g>
            <path
              d="M104.5,96.8c-6.9,0-12.5-5.6-12.5-12.5s5.6-12.5,12.5-12.5S117,77.4,117,84.2S111.4,96.8,104.5,96.8z     M104.5,74.2c-5.5,0-10,4.5-10,10s4.5,10,10,10s10-4.5,10-10S110,74.2,104.5,74.2z"
              fill="#62355C"
            />
          </g>
          <g>
            <circle cx="88" cy="84.2" fill="#EC7BB0" r="11.2" />
          </g>
          <g>
            <path
              d="M88,96.8c-6.9,0-12.5-5.6-12.5-12.5S81.1,71.8,88,71.8s12.5,5.6,12.5,12.5S94.9,96.8,88,96.8z M88,74.2    c-5.5,0-10,4.5-10,10s4.5,10,10,10s10-4.5,10-10S93.5,74.2,88,74.2z"
              fill="#62355C"
            />
          </g>
        </g>
      </svg>

      <div class="card-image-data">
        <div>{{cardItem.maskedPan}}</div>
        <div>{{cardItem.cardHolder}}</div>
        <dropdown :options="arrayOfObjects" :selected="object" v-on:updateOption="methodToRunOnSelect"></dropdown>
        <!-- <VueSelect
          v-model="current"
          placeholder="Выберите счет"
          style="width:100%;"
          class="ml-auto mr-auto mt-4"
        >
          <option value="1">4256 20** **** 1234</option>
          <option value="2">4256 20** **** 1234</option>
        </VueSelect>-->

        <!-- <div>
          <b-dropdown split split-href="#foo/bar" text="" variant="outline-primary" class="m-2">
            <b-dropdown-item href="#">Action</b-dropdown-item>
            <b-dropdown-item href="#">Another action</b-dropdown-item>
            <b-dropdown-item href="#">Something else here...</b-dropdown-item>
          </b-dropdown>
        </div>-->
      </div>
    </div>

    <div class="card-info" style="position:relative;">
      <div class="card-balance">
        <div v-if="validate" class="font-weight-bold ml-5">Баланс: 13, 000 &#8381;</div>
      </div>
      <div class="bill">
        <!-- <div class="sub-bill" style="width:10%; float:right;"> -->
        <button type="button" @click="showModal" class="btn btn-outline-secondary">Отчет</button>
        <!-- </div> -->
      </div>
      <div class="last-transactions mt-3">
        <!-- <div class="transaction">
          <div class="transaction-date ml-2">14.09.12</div>
          <div class="transaction-title">Test</div>
          <div class="transaction-amount mr-2">212 &#8381;</div>
        </div>

        <div class="transaction">
          <div class="transaction-date ml-2">14.09.12</div>
          <div class="transaction-title">Test</div>
          <div class="transaction-amount mr-2">212 &#8381;</div>
        </div>-->

        <div class="transaction">
          <div>
            <BulmaAccordion
              :dropdown="true"
              :caretAnimation="{
    duration: '.3s',
    timerFunc: 'ease-in-out',
}"
              :slide="{
    duration: '.4s',
    timerFunc: 'ease',
}"
            >
              <!-- The wrapper component for all the items -->
              <BulmaAccordionItem>
                <div class="transaction" slot="title">
                  <div class="transaction-date ml-2">14.09.12</div>
                  <div class="transaction-title">Test</div>
                  <div class="transaction-amount mr-2">212 &#8381;</div>
                </div>
                <p
                  slot="content"
                >Lorem ipsum dolor sit amet consectetur adipisicing elit. Natus eos illo expedita asperiores rem iure aliquid dolore, pariatur dignissimos, minima inventore? Minima voluptatum nulla, error omnis laboriosam voluptatibus rem aperiam.</p>
              </BulmaAccordionItem>
              <!-- add as many of these items as you need - fill them with content via the slots -->
            </BulmaAccordion>

            <BulmaAccordion
              :dropdown="true"
              :icon="'caret'"
              :caretAnimation="{
    duration: '.3s',
    timerFunc: 'ease-in-out',
}"
              :slide="{
    duration: '.4s',
    timerFunc: 'ease',
}"
            >
              <!-- The wrapper component for all the items -->
              <BulmaAccordionItem>
                <div class="transaction" slot="title">
                  <div class="transaction-date ml-2">14.09.12</div>
                  <div class="transaction-title">Test</div>
                  <div class="transaction-amount mr-2">212 &#8381;</div>
                </div>
                <p
                  slot="content"
                >Lorem ipsum dolor sit amet consectetur adipisicing elit. Natus eos illo expedita asperiores rem iure aliquid dolore, pariatur dignissimos, minima inventore? Minima voluptatum nulla, error omnis laboriosam voluptatibus rem aperiam.</p>
              </BulmaAccordionItem>
              <!-- add as many of these items as you need - fill them with content via the slots -->
            </BulmaAccordion>
          </div>
        </div>
      </div>
    </div>
    <modal name="hello-world">

        <div class="inner-modal p-3 ml-auto mr-auto">

            <div class="row ml-auto mr-auto text-center">
                <div class="col-6">
                    Кредит
                </div>
                <div class="col-6">
                    Дебит
                </div>
            </div>

            <div class="row ml-auto mr-auto text-center">
                <div class="col-6">Налог: </div>
                <div class="col-6">Процент налога: </div>
            </div>

        </div>


    </modal>
    <modals-container />
    <v-dialog >Hello</v-dialog>
  </div>
</template>

<script>
import VueSelect from "v-super-select";
import { BulmaAccordion, BulmaAccordionItem } from "vue-bulma-accordion";
import dropdown from "vue-dropdowns";
import VModal from "vue-js-modal";
export default {
  components: {
    VueSelect,
    BulmaAccordion,
    BulmaAccordionItem,
    VModal,
    dropdown
  },
  props:["cardItem"],
  data() {
    return {
      options: [
        {
          value: "option 1"
        },
        {
          value: "option 2"
        },
        {
          value: "option 3"
        }
      ],
      current: "",
      arrayOfObjects: [{ name: "First" }, {name:"second"}],
      object: {
        name: "Выберите счет"
      }
    };
  },
  mounted() {
      this.arrayOfObjects = this.cardItem.accounts.map(x => {
          return {
              name:x.accountName
          }
      })
  },
  methods: {
    showModal() {
      this.$modal.show("hello-world", {
        title: "Alert!",
        text: "You are too awesome",
        buttons: [
          {
            title: "Close"
          }
        ]
      });
    },
    methodToRunOnSelect(payload) {
      this.object = payload;
    }
  },
  computed: {
      validate(){
          return this.object.name !== "Выберите счет"
      }
  },
};
</script>

<style>
.icon > svg {
  /* height:50px; */
  display: none;
}

.dropdown-menu{
    display: block !important;
}

.dropdown-toggle{
    padding: 0px !important;
}
.caret{
    display: none;
}
</style>

<style scoped>
.cardd {
  height: 300px;
  width: 80%;
  background-color: white;
  margin-left: auto;
  margin-right: auto;
  display: flex;
  flex-direction: row;
  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.2);
}

.brd {
  border: 1px solid black;
}

.card-info {
  display: flex;
  flex-direction: column;
  width: 70%;
  height: 100%;
}

.card-image {
  width: 30%;
  position: relative;
}

.card-image-data {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 50%;
  background-color: #fdf5da;
  /* font-size: 2rem; */
}

.card-image-data > div {
  font-size: 20px;
  margin-top: 7px;
}

.bill {
  text-align: right;
  margin-top: 10px;
  width: auto;
  position: absolute;
  top: 5px;
  right: 5px;
}
.sub-bill:hover {
  cursor: pointer;
  text-decoration: underline;
}

.sub-bill {
}

.card-image-data > div:first-child {
  font-weight: bold;
}

.card-image > svg {
  width: 100%;
  height: 100%;
}

.card-balance {
  height: 20%;
  text-align: left;
  font-size: 2em;
  font-weight: 600;
  /* margin-left: auto; */
  /* margin-right: auto; */
}

.last-transactions {
  height: 75%;
  width: 80%;
  margin-left: auto;
  margin-right: auto;
}

.last-transactions > ul {
  padding: 0;
}

.transaction {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  list-style-type: none;
  border-bottom: 1px solid #ccc;
}

.transaction:hover {
  background-color: #ebeaea;
  cursor: pointer;
}

body {
  color: #2c3e50;
  background: #ecf0f1;
  padding: 0 1em 1em;
}
h1 {
  margin: 0;
  line-height: 2;
  text-align: center;
}
h2 {
  margin: 0 0 0.5em;
  font-weight: normal;
}
input {
  position: absolute;
  opacity: 0;
  z-index: -1;
}
.row {
  display: flex;
}
.row .col {
  flex: 1;
}
.row .col:last-child {
  margin-left: 1em;
}
/* Accordion styles */
.tabs {
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 4px -2px rgba(0, 0, 0, 0.5);
}
.tab {
  width: 100%;
  color: white;
  overflow: hidden;
}
.tab-label {
  display: flex;
  justify-content: space-between;
  padding: 1em;
  background: #2c3e50;
  font-weight: bold;
  cursor: pointer;
  /* Icon */
}
.tab-label:hover {
  background: #1a252f;
}
.tab-label::after {
  content: "\276F";
  width: 1em;
  height: 1em;
  text-align: center;
  transition: all 0.35s;
}
.tab-content {
  max-height: 0;
  padding: 0 1em;
  color: #2c3e50;
  background: white;
  transition: all 0.35s;
}
.tab-close {
  display: flex;
  justify-content: flex-end;
  padding: 1em;
  font-size: 0.75em;
  background: #2c3e50;
  cursor: pointer;
}
.tab-close:hover {
  background: #1a252f;
}
input:checked + .tab-label {
  background: #1a252f;
}
input:checked + .tab-label::after {
  transform: rotate(90deg);
}
input:checked ~ .tab-content {
  max-height: 100vh;
  padding: 1em;
}
</style>